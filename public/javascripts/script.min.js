var OAuth="",deviceId="";function parseJwt(e){var a=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(a))}function nextTrack(e,a){$.ajax({type:"POST",url:"https://api.spotify.com/v1/me/player/next?device_id="+a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},success:function(){console.log("next")},error:function(e){console.log(JSON.stringify(e.responseJSON))}}).done(function(){window.location.reload(1)})}function prevTrack(e,a){$.ajax({type:"POST",url:"https://api.spotify.com/v1/me/player/previous?device_id="+a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},success:function(){console.log("prev")},error:function(e){console.log(JSON.stringify(e.responseJSON))}}).done(function(){window.location.reload(1)})}function pauseTrack(e,a){$.ajax({type:"PUT",url:"https://api.spotify.com/v1/me/player/pause?device_id="+a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},success:function(){console.log("pause")},error:function(e){console.log(JSON.stringify(e.responseJSON))}})}function playTrack(e,a){$.ajax({type:"PUT",url:"https://api.spotify.com/v1/me/player/play?device_id="+a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},data:"{}",success:function(){console.log("play")},error:function(e){console.log(JSON.stringify(e.responseJSON))}})}$(document).ready(function(){var e=document.createElement("img");e.setAttribute("crossOrigin","*"),e.setAttribute("src",image_album),e.addEventListener("load",function(){var a=new Vibrant(e).swatches();if(void 0==a.Vibrant)var t=a.DarkMuted.getHex();else t=a.Vibrant.getHex();$("meta[name='theme-color']").attr("content",t),$("#bg").css("background-image","linear-gradient("+t+" 60%, #000000 )")});var a=parseJwt($.cookie("jwt"));OAuth=a.OAuth,deviceId=a.deviceId,$("#next").click(function(e){$("#next").addClass("disabled"),$("#prev").addClass("disabled"),$("#pause").addClass("disabled"),e.preventDefault(),nextTrack(OAuth,deviceId)}),$("#prev").click(function(e){$("#next").addClass("disabled"),$("#prev").addClass("disabled"),$("#pause").addClass("disabled"),e.preventDefault(),prevTrack(OAuth,deviceId)}),$("#pause").click(function(e){$("#pause").hasClass("fa-pause")?(e.preventDefault(),pauseTrack(OAuth,deviceId),$("#pause").removeClass("fa-pause"),$("#pause").addClass("fa-play")):(e.preventDefault(),playTrack(OAuth,deviceId),$("#pause").removeClass("fa-play"),$("#pause").addClass("fa-pause"))})}),0!=duration_ms&&0!=progress_ms&&setTimeout(function(){window.location.reload(1)},duration_ms-progress_ms);
